<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  
  <style>
    /* Noto Sans KR í°íŠ¸ ì ìš© */
    body {
      font-family: 'Noto Sans KR', sans-serif;
    }
    /* ëª¨ë‹¬ì´ í•­ìƒ ì¤‘ì•™ì— ì˜¤ë„ë¡ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    #item-modal {
        max-width: 90%; 
        width: 448px; /* max-w-md */
    }
    /* ì±—ë´‡ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
    .user-message {
      @apply bg-blue-500 text-white p-3 rounded-xl rounded-br-none max-w-[80%] self-end;
    }
    .chatbot-message {
      @apply bg-gray-200 text-gray-800 p-3 rounded-xl rounded-tl-none max-w-[80%] self-start;
    }
    /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ì„ íƒ ì‚¬í•­) */
    #chat-messages-container {
        max-height: 400px;
        overflow-y: auto;
    }
    /* ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
    #image-preview-container {
      position: relative; /* X ë²„íŠ¼ì„ ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì§€ì •í•˜ê¸° ìœ„í•´ ë¶€ëª¨ë¥¼ ìƒëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì • */
      min-height: 50px;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">

  <div class="max-w-md mx-auto bg-white shadow-lg rounded-lg overflow-hidden min-h-screen">
    
    <header class="p-4 bg-emerald-600 text-white shadow-md">
      <h1 class="text-2xl font-bold text-center mb-2">â™»ï¸ ìŠ¤ë§ˆíŠ¸ ë¶„ë¦¬ìˆ˜ê±°</h1>
      
      <div id="location-info-display" class="bg-emerald-700 p-3 rounded-lg text-sm min-h-[50px]">
        <p class="text-center">ğŸ”„ ğŸ“ í˜„ì¬ ìœ„ì¹˜ì˜ ë¶„ë¦¬ìˆ˜ê±° ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>
    </header>

    <main class="p-4">
      <section id="guide-section" class="space-y-4">
        <h2 class="text-xl font-semibold text-gray-800">ë¶„ë¦¬ë°°ì¶œ ê°€ì´ë“œ</h2>
        
        <div id="category-grid" class="grid grid-cols-3 gap-3">
          <p class="text-gray-500 col-span-3">ê°€ì´ë“œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <div id="item-list-container" class="hidden space-y-2">
          </div>
      </section>
      
      <hr class="my-6 border-gray-200" />
      
      <section id="chatbot-section" class="space-y-4">
        <h2 class="text-xl font-semibold text-gray-800">ğŸ¤– AI ì±—ë´‡ê³¼ ì‰½ê²Œ ë¶„ë¦¬ìˆ˜ê±°í•´ìš”</h2>
        <p class="text-sm text-gray-500 mb-4">ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ê±°ë‚˜ ì§ì ‘ ì§ˆë¬¸í•˜ì—¬ ë¶„ë¦¬ìˆ˜ê±° ë°©ë²•ì„ í™•ì¸í•˜ì„¸ìš”.</p>
        
        <div id="chat-interface" class="interface-content space-y-4 pt-4">
          
          <div id="chat-messages-container" class="flex flex-col space-y-4 p-3 bg-gray-50 rounded-lg min-h-[150px] overflow-y-auto">
             <div class="chatbot-message">ì•ˆë…•í•˜ì„¸ìš”! ë¶„ë¦¬ìˆ˜ê±°ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì„ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”.</div>
          </div>

          <div id="image-preview-container" class="hidden relative bg-gray-200 rounded-lg p-2 flex justify-center items-center">
              <img id="image-preview" class="max-h-32 rounded-lg object-contain" alt="ì„ íƒëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°" />
              <button id="remove-image-btn" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 text-xs font-bold hover:bg-red-600 shadow-md">X</button>
          </div>
          
          <div class="flex space-x-2 relative items-center">
              <input type="file" id="camera-input" accept="image/*" capture="environment" class="hidden" />
              
              <button id="open-camera-btn" class="bg-gray-300 text-gray-700 p-3 rounded-lg font-semibold hover:bg-gray-400 transition shadow">
                  ğŸ“¸
              </button>
              
              <input type="text" id="chat-input" placeholder="ë¶„ë¦¬ìˆ˜ê±°ì— ëŒ€í•´ ì§ˆë¬¸í•´ ì£¼ì„¸ìš”..." class="flex-1 border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500" />
              <button id="send-chat-btn" class="bg-emerald-500 text-white p-3 rounded-lg font-semibold hover:bg-emerald-600 transition shadow">
                ì „ì†¡
              </button>
          </div>

          <div id="chatbot-source-container" class="mt-4 p-3 bg-yellow-100 border border-yellow-300 rounded-lg text-xs hidden">
            <h4 class="font-bold text-yellow-800 mb-1">ğŸ” ë‹µë³€ ì¶œì²˜</h4>
            <div id="source-list" class="space-y-1">
              </div>
          </div>
        </div>
        
      </section>


    </main>

  </div>

  <dialog id="item-modal" class="max-w-md mx-auto p-0 rounded-lg shadow-xl backdrop:bg-black/50 w-11/12">
    <div class="p-5">
      <h3 id="modal-title" class="text-lg font-bold text-emerald-700"></h3>
      <p id="modal-description" class="mt-2 text-sm text-gray-600 whitespace-pre-wrap"></p>
      <button id="modal-close-btn" class="mt-4 w-full bg-emerald-600 text-white py-2 rounded-lg font-semibold hover:bg-emerald-700">
        ë‹«ê¸°
      </button>
    </div>
  </dialog>

  <script src="{{ url_for('static', filename='scripts/main.js') }}"></script>
</body>
</html>